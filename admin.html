<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Advocate Diary</title>
    <link rel="stylesheet" href="style.css?v=42.0">
    <meta name="theme-color" content="#0d6efd">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <script src="theme.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="logo-icon">üëÆ‚Äç‚ôÇÔ∏è</span> Admin Panel</h1>
            <div class="header-controls">
                <span id="adminEmail" style="color:var(--primary); font-weight:bold;">Admin</span>
                <a href="index.html" class="header-link">Back to Diary</a>
                <button id="btnLogout" style="background:var(--danger); color:white;">Logout</button>
            </div>
        </header>

        <main>
            <h2 style="text-align:center; color:var(--text-main);">All Registered Users</h2>
            
            <div class="controls-wrapper">
                <div class="search-container" style="width:100%;">
                    <label>Search User:</label>
                    <input type="text" id="adminSearch" placeholder="Search by email...">
                </div>
            </div>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Created At</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <tr><td colspan="4">Loading users...</td></tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <div id="userModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeUserModal">&times;</span>
            <h2 style="color:var(--primary); margin-top:0;">User Details</h2>
            
            <div id="userDetailsContent" style="margin-bottom: 20px;">
                </div>

            <h3 style="margin-top:20px; border-top:1px solid var(--border-color); padding-top:10px;">User's Cases</h3>
            <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                <table style="font-size: 0.9em;">
                    <thead>
                        <tr>
                            <th>Case No</th>
                            <th>Party</th>
                            <th>Next Date</th>
                        </tr>
                    </thead>
                    <tbody id="userCasesTableBody">
                        </tbody>
                </table>
            </div>
            
            <div style="margin-top:20px; text-align:right;">
                <button id="closeModalBtn" style="background:var(--text-light); color:white; padding:8px 16px; border-radius:6px;">Close</button>
            </div>
        </div>
    </div>

    <div class="global-footer">
        <p>Admin Console</p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script>
        const firebaseConfig = { 
            apiKey: "AIzaSyBpe3oaDibo7Y9ZaPxf5hJtRyI6PhTY344", 
            authDomain: "advocate-diary-co.firebaseapp.com", 
            projectId: "advocate-diary-co", 
            storageBucket: "advocate-diary-co.appspot.com", 
            messagingSenderId: "809588634104", 
            appId: "1:809588634104:web:f5d4838294ad602aeb660d", 
            measurementId: "G-53VM0EZCWC" 
        }; 
        firebase.initializeApp(firebaseConfig);
    </script>
    
    <script src="admin.js"></script>
</body>
</html>